{"type": "root", "attrs": {"type": "node", "context": "sop", "internal": "heightfield_erode", "icon": "SOP/heightfield_erode", "version": "2.0", "since": "17.0", "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["HeightField Erode"], "extent": [0, 22]}, {"type": "summary", "indent": 0, "text": ["Calculates thermal and hydraulic erosion over time (frames) to create more realistic terrain."], "extent": [144, 246]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [246, 261], "body": [{"type": "para", "indent": 0, "text": ["This node uses rainfall, the erodibility of the soil, and entrainment rates as variables to simulate erosion and deposit buildup."], "extent": [261, 393]}, {"type": "para", "indent": 0, "text": ["This node works iteratively during playback. It will appear to have no effect on the first frame. You need to play the animation to see the effects of the node. Once the simulation converges to something that looks good, you can export the volumes from that frame to a file (using ", {"scheme": "Node", "value": "/nodes/sop/heightfield_output", "type": "link", "text": ["Height Field Output"], "fullpath": "/nodes/sop/heightfield_output.html"}, ")."], "extent": [393, 727]}, {"type": "para", "indent": 0, "text": ["For an example of erosion, create the Mountain preset from the ", {"type": "ui", "text": ["Terrain FX"]}, " shelf tab and press Play."], "extent": [727, 832]}, {"type": "para", "indent": 0, "text": [{"scheme": "Image", "value": "/images/nodes/sop/heightfield_erode.jpg", "type": "img", "text": ""}], "extent": [832, 882]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Controlling the look"], "extent": [882, 909], "body": [{"type": "dt_group", "body": [{"type": "dt", "indent": 0, "text": ["Channel shape"], "extent": [909, 925], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Turn ", {"type": "ui", "text": ["Main \u25b8 Hydro \u25b8 Bank angle"]}, " down to get wide, shallow channels. Turn it up to get narrow, deep channels."], "extent": [925, 1044]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Turn ", {"type": "ui", "text": ["Advanced \u25b8 Precipitation \u25b8 Density"]}, " down to get narrow channels, turn it up to get wide channels."], "extent": [1044, 1157]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Turn ", {"type": "ui", "text": ["Advanced \u25b8 Raindrop settings \u25b8 Expand radius"]}, " down to get more winding, narrow channels, turn it up to get straighter, wider channels."], "extent": [1157, 1307]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Turn ", {"type": "ui", "text": ["Advanced \u25b8 Raindrop settings \u25b8 Blur radius"]}, " down to get deeper channels, turn it up to get softer channels."], "extent": [1307, 1430]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["Ridge shape"], "extent": [1430, 1443], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Turn ", {"type": "ui", "text": ["Main \u25b8 Thermal \u25b8 Cut angle"]}, " down to get sharp ridges, turn it up to get rounded ridges."], "extent": [1443, 1546]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["This is also affected by the ", {"type": "ui", "text": ["Removal rate"]}, "."], "extent": [1546, 1600]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["Lakes"], "extent": [1600, 1607], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Turn ", {"type": "ui", "text": ["Advanced \u25b8 Precipitation \u25b8 Evaporation rate"]}, " down to get big lakes, turn it up to get smaller or no lakes."], "extent": [1607, 1729]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Turn ", {"type": "ui", "text": ["Advanced \u25b8 Raindrop settings \u25b8 Blur radius"]}, " down to get harsher lake edges, turn it up to get smoother lake edges."], "extent": [1729, 1859]}], "container": true}], "container": true}, {"type": "dt", "indent": 0, "text": ["Debris"], "extent": [1859, 1867], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Turn ", {"type": "ui", "text": ["Advanced \u25b8 Debris flow \u25b8 Quantization"]}, " down to get smoother debris flow, turn it up to get grainy debris flow."], "extent": [1867, 1993]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Turn ", {"type": "ui", "text": ["Advanced \u25b8 Debris flow \u25b8 Max height"]}, " down to get less/no debris along ridge lines, turn it up to get more debris along ridge lines."], "extent": [1993, 2140]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Turn ", {"type": "ui", "text": ["Advanced \u25b8 Debris flow \u25b8 Repose angle"]}, " down to get less pile-up (like sand), turn it up to get more pile-up (like rocks)."], "extent": [2140, 2278]}], "container": true}], "container": true}], "container": true}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Tips and notes"], "extent": [2278, 2299], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["For a first pass erosion, on the ", {"type": "ui", "text": ["Advanced"]}, " tab:"], "extent": [2299, 2358], "body": [{"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Under ", {"type": "ui", "text": ["Hydro \u25b8 Erodability Adjustments"]}, ":"], "extent": [2358, 2408], "body": [{"type": "bullet_group", "body": [{"blevel": 10, "type": "bullet", "indent": 8, "text": ["Set ", {"type": "ui", "text": ["Ramp up iterations"]}, " to ", {"type": "code", "text": ["0"]}, "."], "extent": [2408, 2453]}, {"blevel": 10, "type": "bullet", "indent": 8, "text": ["Set ", {"type": "ui", "text": ["Initial factor"]}, " to ", {"type": "code", "text": ["1"]}, "."], "extent": [2453, 2494]}, {"blevel": 10, "type": "bullet", "indent": 8, "text": ["Set ", {"type": "ui", "text": ["Slope factor"]}, " to ", {"type": "code", "text": ["0"]}, "."], "extent": [2494, 2534]}], "container": true}], "container": true}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Under ", {"type": "ui", "text": ["Hydro \u25b8 Riverbed"]}, ":"], "extent": [2534, 2569], "body": [{"type": "bullet_group", "body": [{"blevel": 10, "type": "bullet", "indent": 8, "text": ["Set ", {"type": "ui", "text": ["Sediment capacity"]}, " to ", {"type": "code", "text": ["20"]}, "."], "extent": [2569, 2615]}], "container": true}], "container": true}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["Under ", {"type": "ui", "text": ["Debris flow"]}, ":"], "extent": [2615, 2645], "body": [{"type": "bullet_group", "body": [{"blevel": 10, "type": "bullet", "indent": 8, "text": ["Turn ", {"type": "ui", "text": ["Debris post smooth"]}, " on. "], "extent": [2645, 2689]}], "container": true}], "container": true}], "container": true}], "container": true}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Removal rates can be negative to build up soil."], "extent": [2689, 2740]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["You can fix pitting/holes  by reducing ", {"type": "ui", "text": ["Max debris depth"]}, "."], "extent": [2740, 2804]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["A masked ", {"type": "ui", "text": ["Grid bias"]}, " can add uneven erosion. Remap the mask to a range of ", {"type": "code", "text": ["-1"]}, " to ", {"type": "code", "text": ["1"]}, "."], "extent": [2804, 2897]}], "container": true}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [2897, 2909], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Reset Simulation"], "extent": [2909, 2928], "body": [{"type": "para", "indent": 4, "text": ["Clear the simulation cache. Ctrl-Click to also reset to the start\n    frame."], "extent": [2953, 3035]}, {"type": "para", "indent": 4, "text": ["Be careful clicking this if you are not viewing the first frame.\n    Houdini will have to re-simulate every frame up to the one you are\n    viewing, which can be slow if you are on a high frame number."], "extent": [3035, 3242]}], "container": true, "attrs": {"id": "resimulate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Freeze"], "extent": [3242, 3250], "body": [{"type": "para", "indent": 4, "text": ["Freeze the output at the specified frame. This can be used to fix the output once the number of desired frames is determined."], "extent": [3273, 3412]}], "container": true, "attrs": {"id": "dofreeze"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Freeze at Frame"], "extent": [3412, 3429], "body": [{"type": "para", "indent": 8, "text": ["The number of frames to freeze the output at."], "extent": [3463, 3518]}], "container": true, "attrs": {"id": "freezeframe"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Main"], "extent": [3518, 3529], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Global Erosion Rate"], "extent": [3529, 3555], "body": [{"type": "para", "indent": 4, "text": ["Controls how many meters of bedrock or debris (here entrained material) is eroded every iteration."], "extent": [3587, 3691]}], "container": true, "attrs": {"id": "globalerosionrate"}, "role": "item"}], "container": true, "role": "item_group"}, {"type": "para", "indent": 0, "text": ["These options control erosion from rainfall, where the flow of water downhill weathers the terrain. You can control the amount of rainfall using the controls on the ", {"type": "ui", "text": ["Precipitation"]}, " tab and the water flow using the controls on the ", {"type": "ui", "text": ["Flow"]}, " tab."], "extent": [3691, 3938]}, {"level": 3, "type": "sep", "indent": 0, "text": [" Hydro "], "extent": [3938, 3952]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Erodability"], "extent": [3952, 3970], "body": [{"type": "para", "indent": 4, "text": ["Controls the softness of bedrock or debris (here entrained material). Higher values would make the terrain easier to erode, causing deeper incisions, more sediment, and more debris being deposited as a result."], "extent": [3996, 4211]}], "container": true, "attrs": {"id": "erodability"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["erodabilitymaskmode"], "extent": [4211, 4232], "body": [{"type": "para", "indent": 8, "text": ["Controls whether to use a mask for erodability or not."], "extent": [4274, 4346]}], "container": true, "attrs": {"id": "erodabilitymaskmode"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Erodability Mask"], "extent": [4346, 4364], "body": [{"type": "para", "indent": 8, "text": ["The name of the erodability mask."], "extent": [4407, 4458]}], "container": true, "attrs": {"id": "erodabilitymasklayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Erosion Rate"], "extent": [4458, 4472], "body": [{"type": "para", "indent": 4, "text": ["Controls the rate at which erosion happens. This is a multiplier on ", {"type": "code", "text": ["Erodability"]}, "."], "extent": [4498, 4594]}], "container": true, "attrs": {"id": "erosionrate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Bank Angle"], "extent": [4594, 4606], "body": [{"type": "para", "indent": 4, "text": ["Sets the angle at which the riverbank rests relative to the riverbed. Lowre values would make wider and flatter river channels."], "extent": [4630, 4763]}], "container": true, "attrs": {"id": "bankangle"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["bankanglemaskmode"], "extent": [4763, 4782], "body": [{"type": "para", "indent": 8, "text": ["Controls whether to use a mask for bank angle or not."], "extent": [4822, 4893]}], "container": true, "attrs": {"id": "bankanglemaskmode"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Bank Angle Mask"], "extent": [4893, 4910], "body": [{"type": "para", "indent": 8, "text": ["The name of the bank angle mask."], "extent": [4951, 4993]}], "container": true, "attrs": {"id": "bankanglemasklayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Spread Iterations"], "extent": [4993, 5012], "body": [{"type": "para", "indent": 4, "text": ["The number of iterations of water spreading simulation to do. More iterations result in longer and less dense incisions."], "extent": [5044, 5178]}], "container": true, "attrs": {"id": "water_spreaditers"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Thermal "], "extent": [5178, 5194]}, {"type": "para", "indent": 0, "text": ["Thermal weathering is caused by frozen rocks thawing and breaking, causing features to wear down and smooth out, and material to pile up on the bottom of inclines."], "extent": [5194, 5360]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Erodability"], "extent": [5360, 5373], "body": [{"type": "para", "indent": 4, "text": ["Controls the softness of the eroding layer or material layer. Higher values would make the terrain easier to erode, causing deeper incisions, more sediment, and more debris being deposited as a result."], "extent": [5399, 5606]}], "container": true, "attrs": {"id": "erodability"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["erodabilitymaskmode"], "extent": [5606, 5627], "body": [{"type": "para", "indent": 8, "text": ["Controls whether to use a mask for erodability or not."], "extent": [5669, 5741]}], "container": true, "attrs": {"id": "erodabilitymaskmode"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Erodability Mask"], "extent": [5741, 5759], "body": [{"type": "para", "indent": 8, "text": ["The name of the erodability mask."], "extent": [5802, 5853]}], "container": true, "attrs": {"id": "erodabilitymasklayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Erosion Rate"], "extent": [5853, 5867], "body": [{"type": "para", "indent": 4, "text": ["Controls the rate at which erosion happens. This is a multiplier on ", {"type": "code", "text": ["Erodability"]}, "."], "extent": [5893, 5981]}], "container": true, "attrs": {"id": "erosionrate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Cut Angle"], "extent": [5981, 5992], "body": [{"type": "para", "indent": 4, "text": ["Set the angle at which the thermal erosion would stop cutting beyond. A lower angle would make the cuts flatter and allow for more erosion to take place."], "extent": [6015, 6174]}], "container": true, "attrs": {"id": "cutangle"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["cutanglemaskmode"], "extent": [6174, 6192], "body": [{"type": "para", "indent": 4, "text": ["Controls whether to use a mask for cut angle or not."], "extent": [6227, 6293]}], "container": true, "attrs": {"id": "cutanglemaskmode"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Cut Angle Mask"], "extent": [6293, 6309], "body": [{"type": "para", "indent": 4, "text": ["The name of the cut angle mask."], "extent": [6345, 6382]}], "container": true, "attrs": {"id": "cutanglemasklayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Global Seed"], "extent": [6382, 6395], "body": [{"type": "para", "indent": 4, "text": ["Random seed to make erosion vary for the same set of variables on the same input."], "extent": [6419, 6506]}], "container": true, "attrs": {"id": "seed "}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Advanced"], "extent": [6506, 6521], "body": [{"level": 3, "type": "sep", "indent": 0, "text": [" Hydro Erosion "], "extent": [6521, 6544]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Removal Rate"], "extent": [6544, 6559], "body": [{"type": "para", "indent": 4, "text": ["Proportion of debris from hydro erosion that is deleted. This simulates water carrying away a certain amount of debris rather than it all accumulating. A value of ", {"type": "code", "text": ["0"]}, " representes no deletion. Negative values correspond to the debris being less dense than the rock, so one unit of eroded rock produces more than one unit of debris."], "extent": [6591, 6927]}], "container": true, "attrs": {"id": "hydro_removalrate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Debris Depth"], "extent": [6927, 6945], "body": [{"type": "para", "indent": 4, "text": ["Stop erosion when the debris layer reaches this depth."], "extent": [6980, 7040]}], "container": true, "attrs": {"id": "hydro_maxdebrisdepth"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Grid Bias"], "extent": [7040, 7051], "body": [{"type": "para", "indent": 8, "text": ["Controls how biased the movement of material is. Setting it to positive values would bias the movement in the direction of the principal axes, and when set to negative values, it would bias the movement at angles of 45 degree relative to the principal axes. The default value of zero would mean no bias in any direction."], "extent": [7088, 7418]}], "container": true, "attrs": {"id": "hydro_gridbias"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["gridbiasmaskmode"], "extent": [7418, 7436], "body": [{"type": "para", "indent": 8, "text": ["Controls whether to use a mask for grid bias or not."], "extent": [7481, 7551]}], "container": true, "attrs": {"id": "hydro_gridbiasmaskmode"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Grid Bias Mask"], "extent": [7551, 7567], "body": [{"type": "para", "indent": 8, "text": ["The name of the grid bias mask."], "extent": [7613, 7654]}], "container": true, "attrs": {"id": "hydro_gridbiasmasklayer"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 4, "type": "sep", "indent": 0, "text": [" Erodability "], "extent": [7654, 7676]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Ramp-up Iterations"], "extent": [7676, 7697], "body": [{"type": "para", "indent": 8, "text": ["The iteration where erodability would get to its maximum value."], "extent": [7749, 7830]}], "container": true, "attrs": {"id": "hydro_erodability_rampupiters"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Initial Factor"], "extent": [7830, 7846], "body": [{"type": "para", "indent": 8, "text": ["Controls how much of the set erodability would the material have on its initial movement. It would increase over the set spread iterations until the max iteration, where it would stay at maximum set value."], "extent": [7900, 8123]}], "container": true, "attrs": {"id": "hydro_erodability_initialfactor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Slope Factor"], "extent": [8123, 8137], "body": [{"type": "para", "indent": 8, "text": ["Control how much the slope of the terrain would affect the erosion amount. Higher values would increase the slope effecting the erosion, and lower values would decrease it. Lowing this value would increase erodability as a result."], "extent": [8189, 8429]}], "container": true, "attrs": {"id": "hydro_erodability_slopefactor"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 4, "type": "sep", "indent": 0, "text": [" Riverbed "], "extent": [8429, 8448]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Erosion Rate Factor"], "extent": [8448, 8470], "body": [{"type": "para", "indent": 8, "text": ["A multiplier on ", {"type": "code", "text": ["Erosion Rate"]}, " that would cause a change on the riverbed only. Increasing this value would cause a more aggressive erosion on the bed, and as a result, it would increase the depth of the incisions."], "extent": [8520, 8743]}], "container": true, "attrs": {"id": "hydro_bed_erosionratefactor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Deposition Rate"], "extent": [8743, 8760], "body": [{"type": "para", "indent": 4, "text": ["Controls the rate at which the excess sediment turns into debris. A value of zero means no sediment is turned into debris, while a value of one will convert all created sediment into debris, and the bedrock would in turn be protected more by the created debris."], "extent": [8799, 9066]}], "container": true, "attrs": {"id": "hydro_bed_depositionrate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["depositionratemaskmode"], "extent": [9066, 9090], "body": [{"type": "para", "indent": 8, "text": ["Controls whether to use a mask for deposition rate or not."], "extent": [9145, 9221]}], "container": true, "attrs": {"id": "hydro_bed_depositionratemaskmode"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Deposition Rate Mask"], "extent": [9221, 9243], "body": [{"type": "para", "indent": 8, "text": ["The name of the deposition rate mask."], "extent": [9299, 9346]}], "container": true, "attrs": {"id": "hydro_bed_depositionratemasklayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sediment Capacity"], "extent": [9346, 9365], "body": [{"type": "para", "indent": 4, "text": ["The amount of sediment that can be carried per unit of moving water. The higher the capacity, the longer the material can erode before it starts depositing its excess sediment."], "extent": [9401, 9583]}], "container": true, "attrs": {"id": "hydro_bed_sedimentcap"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 4, "type": "sep", "indent": 0, "text": [" Riverbank ~~~~        "], "extent": [9583, 9611]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Erosion Rate Factor"], "extent": [9611, 9633], "body": [{"type": "para", "indent": 8, "text": ["A multiplier on ", {"type": "code", "text": ["Erosion Rate"]}, " that would cause a change on the riverbank only. Increasing this value would cause a more aggressive erosion on the bank, and as a result, it would increase the width of the incisions."], "extent": [9684, 9917]}], "container": true, "attrs": {"id": "hydro_bank_erosionratefactor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Bed to Bank Water Ratio"], "extent": [9917, 9946], "body": [{"type": "para", "indent": 8, "text": ["The maximum of bank to bed water column height ratio that will be considered as river bank bank. Ratios higher than this number will not be considered as bank during erosion."], "extent": [10000, 10184]}], "container": true, "attrs": {"id": "hydro_bank_maxbankbedwaterratio"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Thermal Erosion "], "extent": [10184, 10208]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Removal Rate"], "extent": [10208, 10223], "body": [{"type": "para", "indent": 4, "text": ["Proportion of debris from thermal erosion that is deleted. This simulates wind carrying away a certain amount of debris rather than it all accumulating. The default is ", {"type": "code", "text": ["0"]}, " (no deletion). Negative values correspond to the debris being less dense than the rock, so one unit of eroded rock produces more than one unit of debris."], "extent": [10257, 10588]}], "container": true, "attrs": {"id": "thermal_removalrate"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Debris Depth"], "extent": [10588, 10606], "body": [{"type": "para", "indent": 4, "text": ["Stop erosion when the debris layer reaches this depth."], "extent": [10643, 10703]}], "container": true, "attrs": {"id": "thermal_maxdebrisdepth"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Grid Bias"], "extent": [10703, 10714], "body": [{"type": "para", "indent": 8, "text": ["Controls how biased the movement of material is. Setting it to positive values would bias the movement in the direction of the principal axes, and when set to negative values, it would bias the movement at angles of 45 degree relative to the principal axes. The default value of zero would mean no bias in any direction."], "extent": [10753, 11083]}], "container": true, "attrs": {"id": "thermal_gridbias"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["gridbiasmaskmode"], "extent": [11083, 11101], "body": [{"type": "para", "indent": 8, "text": ["Controls whether to use a mask for grid bias or not."], "extent": [11148, 11218]}], "container": true, "attrs": {"id": "thermal_gridbiasmaskmode"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Grid Bias Mask"], "extent": [11218, 11234], "body": [{"type": "para", "indent": 8, "text": ["The name of the grid bias mask."], "extent": [11282, 11331]}], "container": true, "attrs": {"id": "thermal_gridbiasmasklayer"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Precipitation "], "extent": [11331, 11353]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Mask"], "extent": [11353, 11360], "body": [{"type": "para", "indent": 4, "text": ["The name of a mask layer controlling rainfall. The values in the layer are a scale on the ", {"type": "ui", "text": ["Amount"]}, " parameter.  This is read from the second input."], "extent": [11390, 11544]}], "container": true, "attrs": {"id": "maskpreciplayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Amount"], "extent": [11544, 11552], "body": [{"type": "para", "indent": 4, "text": ["The amount of rainfall simulated in each frame. If you use very large amounts you will not see much erosion since essentially the entire terrain would be under water."], "extent": [11578, 11750]}], "container": true, "attrs": {"id": "rain_amount"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Density"], "extent": [11750, 11759], "body": [{"type": "para", "indent": 4, "text": ["How closely packed rain drops are. Smaller densities give more erosion lines. Larger densities create erosion cracks that are father apart and wider."], "extent": [11786, 11941]}], "container": true, "attrs": {"id": "rain_density"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Evaporation Rate"], "extent": [11941, 11959], "body": [{"type": "para", "indent": 4, "text": ["The rate of evaporation. A higher rate will leave less pooled water in each frame. If you want more water to pool you can increase ", {"type": "ui", "text": ["Amount"]}, " and/or decrease the evaporation rate."], "extent": [11990, 12175]}], "container": true, "attrs": {"id": "rain_evaporation"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 4, "type": "sep", "indent": 0, "text": [" Raindrop Settings "], "extent": [12175, 12203]}, {"type": "para", "indent": 0, "text": ["These settings can be used to control the size of raindrops. As you expand the radius of each raindrop you will have fewer drops to ensure the density of precipitation will stay constant."], "extent": [12203, 12393]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Expand Radius"], "extent": [12393, 12408], "body": [{"type": "para", "indent": 4, "text": ["This parameter can be used to expand the radius of each raindrop to cover more cells. This produces larger drops, which could make the incisions on the terrain more sparse and increase their width."], "extent": [12436, 12639]}], "container": true, "attrs": {"id": "rain_expandradius"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Blur Radius"], "extent": [12639, 12652], "body": [{"type": "para", "indent": 4, "text": ["This parameter can be used to blur the column of water to make a smoother transition for each drop from a water cell to a dry cell. This parameter can be used to increase the width of the incisions on the terrain, while also making them smoother."], "extent": [12678, 12930]}], "container": true, "attrs": {"id": "rain_blurradius"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Water Flow "], "extent": [12930, 12949]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Quantization"], "extent": [12949, 12964], "body": [{"type": "para", "indent": 4, "text": ["Controls the chunkiness of the water flow. A lower value would make the flow more continuous and a higher value would make the flow more chunky."], "extent": [12986, 13144]}], "container": true, "attrs": {"id": "water_quant"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Post Smooth"], "extent": [13144, 13157], "body": [{"type": "para", "indent": 8, "text": ["Smooth the water on the terrain as a post processing step."], "extent": [13196, 13264]}], "container": true, "attrs": {"id": "water_postsmooth"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Debris Flow "], "extent": [13264, 13284]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Spread Iterations"], "extent": [13284, 13304], "body": [{"type": "para", "indent": 4, "text": ["How many iterations of the spread algorithm to run for each frame."], "extent": [13336, 13408]}], "container": true, "attrs": {"id": "debris_iterations"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Quantization"], "extent": [13408, 13422], "body": [{"type": "para", "indent": 4, "text": ["Controls the chunkiness of the debris flow. A lower value would make the flow more continuous and a higher value would make the flow more chunky."], "extent": [13445, 13604]}], "container": true, "attrs": {"id": "debris_quant"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Post Smooth"], "extent": [13604, 13617], "body": [{"type": "para", "indent": 8, "text": ["Smooth the debris on the terrain as a post processing step."], "extent": [13657, 13734]}], "container": true, "attrs": {"id": "debris_postsmooth"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Water Absorption"], "extent": [13734, 13752], "body": [{"type": "para", "indent": 3, "text": ["Controls the movement of the debris based on last frame\u2019s flow field. Higher values would stop the debris from moving near the flow channels, and lower values would cause the debris to ignore the flow channels, making it move independently. "], "extent": [13774, 14020]}], "container": true, "attrs": {"id": "water_absor"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Height"], "extent": [14020, 14032], "body": [{"type": "para", "indent": 4, "text": ["The maximum height of wet debris that would not move due to water absorption. Beyond this limit the debris start to move again."], "extent": [14063, 14196]}], "container": true, "attrs": {"id": "debris_maxheight"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Repose Angle"], "extent": [14196, 14210], "body": [{"type": "para", "indent": 4, "text": ["The maximum slope (measured in degrees from the horizontal) at which loose solid material will remain in place without sliding."], "extent": [14238, 14371]}], "container": true, "attrs": {"id": "debris_repose"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["reposeanglemaskmode"], "extent": [14371, 14392], "body": [{"type": "para", "indent": 8, "text": ["Controls whether to use a mask for repose angle or not."], "extent": [14441, 14514]}], "container": true, "attrs": {"id": "debris_reposeanglemaskmode"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Repose Angle Mask"], "extent": [14514, 14533], "body": [{"type": "para", "indent": 8, "text": ["The name of the repose angle mask."], "extent": [14583, 14635]}], "container": true, "attrs": {"id": "debris_reposeanglemasklayer"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Bedrock"], "extent": [14635, 14649], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Bedrock Override"], "extent": [14649, 14668], "body": [{"type": "para", "indent": 4, "text": ["Each frame of simulation the bedrock layer will be replaced with\n    this layer in the second input.  If not present, no replacement is\n    done."], "extent": [14668, 14819]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Adjust Height by Bedrock Change"], "extent": [14819, 14852], "body": [{"type": "para", "indent": 4, "text": ["When the bedrock is changed, also adjust the terrain height.  This\n    allows for mountain building where the second input has an animated\n    mountain growing, the net new height is added each frame while\n    erosion occurs."], "extent": [14852, 15083]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Strata "], "extent": [15083, 15098]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Adjust Erodability by Strata"], "extent": [15098, 15129], "body": [{"type": "para", "indent": 4, "text": ["Adjusts how erodable rock is by how far it is away from the reference\n    bedrock layer."], "extent": [15129, 15223]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Strata Depth"], "extent": [15223, 15237], "body": [{"type": "para", "indent": 4, "text": ["The depth for the strata.  The Strata Erodability ramp uses this depth\n    to control how deep it represents.   A positive values means the strata\n    represents hardness below the bedrock layer.  Negative values mean\n    the strata represents hardness above the bedrock layer."], "extent": [15237, 15520]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Clamp at Strata Bounds"], "extent": [15520, 15544], "body": [{"type": "para", "indent": 4, "text": ["Depths outside of the strata range will be clamped to the ends of the\n    ramp.  If clamping is off, they will repeat forming a periodic pattern."], "extent": [15544, 15695]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Strata Erodability"], "extent": [15695, 15715], "body": [{"type": "para", "indent": 4, "text": ["How erodable rocks are at different strata depths.  The left most\n    is at the bedrock reference layer, the right most at the extreme\n    strata depth.  Values of 1 are fully erodable, such as loose dirt,\n    and values of 0 prevent erosion, like granite."], "extent": [15715, 15977]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Layers"], "extent": [15977, 15990], "body": [{"type": "para", "indent": 0, "text": ["The options on this tab control what the node does if the input contains layers this node normally generates from scratch."], "extent": [15990, 16115]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Remove Debris Layer from Input Height Layer"], "extent": [16115, 16160], "body": [{"type": "para", "indent": 4, "text": ["If the input already has a debris layer (for example from a previous erode node, or painted manually), keep it as debris but ignore it in this node\u2019s erosion calculations."], "extent": [16198, 16379]}], "container": true, "attrs": {"id": "debris_removefromheight"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Remove Water Layer from Input Height Layer"], "extent": [16379, 16423], "body": [{"type": "para", "indent": 4, "text": ["If the input already has a water layer (for example from a previous erode node, or painted manually), keep it as water but ignore it in this node\u2019s erosion calculations."], "extent": [16460, 16639]}], "container": true, "attrs": {"id": "water_removefromheight"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Reset Water Layer"], "extent": [16639, 16658], "body": [{"type": "para", "indent": 4, "text": ["If the input already has a water layer, delete it."], "extent": [16683, 16743]}], "container": true, "attrs": {"id": "clearwater"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Reset Debris Layer"], "extent": [16743, 16763], "body": [{"type": "para", "indent": 4, "text": ["If the input already has a debris layer, delete it."], "extent": [16789, 16846]}], "container": true, "attrs": {"id": "cleardebris"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Reset Sediment Layer"], "extent": [16846, 16868], "body": [{"type": "para", "indent": 4, "text": ["If the input already has a sediment layer, delete it."], "extent": [16896, 16959]}], "container": true, "attrs": {"id": "clearsediment"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Add Debris Layer to Final Height Layer"], "extent": [16959, 16999], "body": [{"type": "para", "indent": 4, "text": ["Use the values in the debris layer to add to the height layer. You might turn this off, for example, if you plan to represent the debris layer some other way, such as a separately shaded volume, or instanced rock geometry."], "extent": [17032, 17260]}], "container": true, "attrs": {"id": "debris_addtoheight"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Add Water Layer to Final Height Layer"], "extent": [17260, 17299], "body": [{"type": "para", "indent": 4, "text": ["Use the values in the water elevation layer to add to the height layer. The default is off. This will ", {"type": "q", "text": ["bake"]}, " the water level into the height values, so for example pooled water will become flat terrain. This might be useful if you just want a very simple output where you will just color the ", {"type": "q", "text": ["water"]}, " areas with a flat color."], "extent": [17331, 17662]}], "container": true, "attrs": {"id": "water_addtoheight"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Layer Bindings"], "extent": [17662, 17683], "body": [{"type": "para", "indent": 0, "text": ["The controls on this tab let you change the default names of the layers the node looks for/creates."], "extent": [17683, 17785]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Height Layer"], "extent": [16, 30], "body": [{"type": "para", "indent": 4, "text": ["The name of the height volume to operate on, usually ", {"type": "code", "text": ["height"]}, "."], "extent": [56, 124]}], "container": true, "attrs": {"id": "heightlayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Water Layer"], "extent": [17832, 17845], "body": [{"type": "para", "indent": 4, "text": ["The name of the layer containing the water elevation (default ", {"type": "code", "text": ["water"]}, ")."], "extent": [17870, 17947]}], "container": true, "attrs": {"id": "waterlayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Material Layer"], "extent": [17947, 17963], "body": [{"type": "para", "indent": 4, "text": ["The name of the layer containing the debris elevation (default ", {"type": "code", "text": ["debris"]}, ")."], "extent": [17991, 18070]}], "container": true, "attrs": {"id": "materiallayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Sediment Layer"], "extent": [18070, 18086], "body": [{"type": "para", "indent": 4, "text": ["The name of the layer containing the sediment elevation (default ", {"type": "code", "text": ["sediment"]}, ")."], "extent": [18114, 18205]}], "container": true, "attrs": {"id": "sedimentlayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Bedrock Layer"], "extent": [18205, 18220], "body": [{"type": "para", "indent": 4, "text": ["The reference layer for determining how far the current height\n    has eroded.  If not present on the input, is set to the original\n    height of the terrain."], "extent": [18243, 18411]}], "container": true, "attrs": {"id": "bedrocklayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Flow Layer"], "extent": [18411, 18423], "body": [{"type": "para", "indent": 4, "text": ["The node outputs a ", {"type": "code", "text": ["flow"]}, " layer representing the ", {"type": "em", "text": ["cumulative"]}, " water flow. This layer has two signed components (x and y) representing the flow direction in voxel space. Because this is cumulative, if water flows left, then flows right, those two motions will cancel and the x component would be 0."], "extent": [18447, 18750]}], "container": true, "attrs": {"id": "flowlayer"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Flow Dir Layer"], "extent": [18750, 18766], "body": [{"type": "para", "indent": 4, "text": ["The node outputs a ", {"type": "code", "text": ["flowdir"]}, " layer containing vectors showing the average direction of flow at each voxel."], "extent": [18793, 18906]}], "container": true, "attrs": {"id": "flowdirlayer"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Simulation"], "extent": [18906, 18923], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Start Frame"], "extent": [18923, 18939], "body": [{"type": "para", "indent": 4, "text": ["The node does not start simulation erosion until this frame. The default is ", {"type": "code", "text": ["1"]}, " (the first frame)."], "extent": [18964, 19068]}], "container": true, "attrs": {"id": "startframe"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Cache Simulation"], "extent": [19068, 19086], "body": [{"type": "para", "indent": 4, "text": ["Caches completed simulation frames in memory, for interactive scrubbing. For very large erosions, turning this option off is the best way to save memory."], "extent": [19113, 19276]}], "container": true, "attrs": {"id": "cacheenabled"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Allow Caching To Disk"], "extent": [19276, 19299], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Cache simulation"]}, " is on and this option is on, the simulation will start caching frames to disk when it reaches the ", {"type": "ui", "text": ["Cache memory"]}, " limit. Frames on disk will be slower to load than frames in memory, but still faster than re-simulating. When this option is off and the simulation reaches the limit, it simply starts deleting the oldest frames from the cache."], "extent": [19325, 19698]}], "container": true, "attrs": {"id": "cachetodisk"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Cache Memory (MB)"], "extent": [19698, 19717], "body": [{"type": "para", "indent": 4, "text": ["The maximum amount of memory (in megabytes) to use to cache simulated frames."], "extent": [19744, 19828]}], "container": true, "attrs": {"id": "cachemaxsize"}, "role": "item"}], "container": true, "role": "item_group"}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Visualization"], "extent": [19828, 19848], "body": [{"type": "para", "indent": 0, "text": ["This tab contains options for visualizing the height and other layers. These are the same options as on the ", {"scheme": "Node", "value": "/nodes/sop/heightfield_visualize", "type": "link", "text": ["Height Field Visualize"], "fullpath": "/nodes/sop/heightfield_visualize.html"}, " node."], "extent": [19848, 20020]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Visualize"], "extent": [20020, 20031], "body": [{"type": "para", "indent": 4, "text": ["Applies a visualization material so you can see an elevation color ramp on the height field and see the water and debris layers as different colors."], "extent": [20057, 20211]}], "container": true, "attrs": {"id": "dovisualize"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Compute Range"], "extent": [4499, 4514], "body": [{"type": "para", "indent": 4, "text": ["Fill in the ", {"type": "ui", "text": ["Min Elevation"]}, " and ", {"type": "ui", "text": ["Max elevation"]}, " parameters using the current min and max values from the height field."], "extent": [4545, 4673]}], "container": true, "attrs": {"id": "vis_computerange"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Min Elevation"], "extent": [4673, 4688], "body": [{"type": "para", "indent": 4, "text": ["The minimum height value to map into the color ramp."], "extent": [4719, 4777]}], "container": true, "attrs": {"id": "vis_minelevation"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Max Elevation"], "extent": [4777, 4792], "body": [{"type": "para", "indent": 4, "text": ["The maximum height value to map into the color ramp."], "extent": [4819, 4881]}], "container": true, "attrs": {"id": "vis_maxelevation"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Height Ramp"], "extent": [4881, 4894], "body": [{"type": "para", "indent": 4, "text": ["Maps height values in the height field (from ", {"type": "ui", "text": ["Min elevation"]}, " to ", {"type": "ui", "text": ["Max elevation"]}, ") into a color ramp to control coloring of the 3D height surface."], "extent": [4923, 5077]}], "container": true, "attrs": {"id": "vis_heightramp"}, "role": "item"}], "container": true, "role": "item_group"}, {"type": "include_group", "body": [{"ext": "heightfield_visualize#vis_layer3", "type": "include", "indent": 0, "role": "item", "extent": [20409, 20453]}], "container": true, "role": "item_group"}]}], "text": "Parameters"}], "title": ["HeightField Erode"], "summary": ["Calculates thermal and hydraulic erosion over time (frames) to create more realistic terrain."], "included": ["/nodes/sop/_heightfield_common", "/nodes/sop/heightfield_visualize"]}