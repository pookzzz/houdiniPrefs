{"type": "root", "attrs": {"type": "node", "context": "lop", "internal": "materiallibrary", "icon": "LOP/materiallibrary", "since": "17.0", "version": null, "namespace": null}, "body": [{"level": 0, "type": "title", "indent": 0, "text": ["Material Library"], "extent": [0, 21]}, {"type": "summary", "indent": 0, "text": ["Authors USD material primitives from shader VOP nodes."], "extent": [115, 178]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Overview"], "extent": [178, 193], "body": [{"type": "note_group", "body": [{"type": "note", "indent": 0, "role": "item", "extent": [193, 200], "body": [{"type": "para", "indent": 4, "text": ["In Houdini 20, the Material Library LOP\u2019s way of creating materials changed fundamentally. In previous versions you could access all shader nodes from the library\u2019s root level. This often lead to confusion, because it was possible to mix incompatible shader nodes. Now, shaders are created inside subnets:"], "extent": [200, 511]}, {"type": "bullet_group", "body": [{"blevel": 6, "type": "bullet", "indent": 4, "text": ["Karma Material Builder"], "extent": [511, 540]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["USD MaterialX Builder"], "extent": [540, 568]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["VEX Material Builder"], "extent": [568, 595]}, {"blevel": 6, "type": "bullet", "indent": 4, "text": ["USD Preview Material Builder"], "extent": [595, 631]}], "container": true}, {"type": "para", "indent": 4, "text": ["The new approach also filters the nodes in the tab menu and it\u2019s, for example, not possible to add MaterialX nodes to a VEX subnet."], "extent": [631, 768]}], "container": true}], "container": true, "role": "item_group"}, {"type": "para", "indent": 0, "text": ["This node translates shader VOP nodes into USD material primitives. "], "extent": [768, 838]}, {"type": "para", "indent": 0, "text": ["A newly created Material Library node uses a pattern asterisk ", {"type": "code", "text": ["*"]}, " in the ", {"type": "ui", "text": ["Material VOP"]}, " parameter to match children VOP nodes inside the LOP and translate them into USD materials. See ", {"scheme": null, "value": "#usdmat", "type": "link", "text": ["USD materials"], "fullpath": "/nodes/lop/materiallibrary.html#usdmat", "fragment": "#usdmat"}, " below."], "extent": [838, 1056]}, {"type": "para", "indent": 0, "text": ["Alternatively, this LOP can also import Houdini VOP materials from other VOP networks (such as ", {"type": "code", "text": ["/mat"]}, "), using ", {"type": "ui", "text": ["Auto-fill Materials"]}, " button."], "extent": [1056, 1199]}]}, {"level": 2, "id": null, "container": true, "type": "h", "indent": 0, "text": ["Tips"], "extent": [1199, 1210], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": ["You can use patterns in the ", {"type": "ui", "text": ["Material VOP"]}, " parameter."], "extent": [1210, 1270]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["You can define a common USD path for all materials, using ", {"type": "ui", "text": ["Material Path Prefix"]}, " parameter. Any material whose ", {"type": "ui", "text": ["Material Path"]}, " multi-parm instance is not an absolute path will use it as a prefix."], "extent": [1270, 1473]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["The ", {"type": "ui", "text": ["Material Path Prefix"]}, " parameter can be used to specify either the ancestor primitive (if the path ends with a slash), or the ancestor path and the shader primitive name prefix (if the path does not end with a slash)."], "extent": [1473, 1700]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["If you want to re-do importing all materials (for example, to grab new materials), click ", {"type": "ui", "text": ["Clear"]}, " in the multi-parm, then click ", {"type": "ui", "text": ["Auto-fill Materials"]}, " again."], "extent": [1700, 1863]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Even though this node allows you to assign the material at the same time you import it, we recommend you use a separate node (", {"scheme": "Node", "value": "/nodes/lop/materiallinker", "type": "link", "text": ["Material Linker LOP"], "fullpath": "/nodes/lop/materiallinker.html"}, " or ", {"scheme": "Node", "value": "/nodes/lop/assignmaterial", "type": "link", "text": ["Assign Material LOP"], "fullpath": "/nodes/lop/assignmaterial.html"}, ") to assign materials. Keeping the two operations separate makes your network easier to understand for others."], "extent": [1863, 2197]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/vop/parameter", "type": "link", "text": ["Parameter VOPs"], "fullpath": "/nodes/vop/parameter.html"}, " set to ", {"type": "ui", "text": ["Subnet Connector"]}, " can be used within a Material Builder subnet, to promote a public interface. These inputs are editable using an ", {"scheme": "Node", "value": "/nodes/lop/editmaterialproperties", "type": "link", "text": ["Edit Material Properties LOP"], "fullpath": "/nodes/lop/editmaterialproperties.html"}, "."], "extent": [2197, 2440]}, {"blevel": 2, "type": "bullet", "indent": 0, "text": ["Additionally, you can make the USD material interface more Houdini-like using ", {"type": "ui", "text": ["Edit Parameter Interface"]}, " on the Builder subnet. The Material Library will author the customData ", {"type": "code", "text": ["houdini:dialogScript"]}, ". This allows users better organization/curate Material interfaces for use Solaris. The ", {"scheme": null, "value": "/solaris/quick_materials", "type": "link", "text": ["Quick Materials"], "fullpath": "/solaris/quick_materials.html"}, " use this mechanism."], "extent": [2440, 2795]}], "container": true}]}, {"level": 2, "id": "usdmat", "container": true, "type": "h", "indent": 0, "text": ["USD materials"], "extent": [2795, 2824], "body": [{"type": "para", "indent": 0, "text": ["Inside the Material Library LOP, the VOP nodes, their parameters, and inputs represent ", {"type": "strong", "text": ["USD shaders"]}, ", their attributes and input connectors.  For example, a ", {"scheme": "Node", "value": "/nodes/vop/principledshader", "type": "link", "text": ["Principled Shader VOP"], "fullpath": "/nodes/vop/principledshader.html"}, " represents a Karma material, and the Pxr Surface VOP represents a USD RenderMan shader."], "extent": [2824, 3121]}, {"type": "para", "indent": 0, "text": ["The ", {"scheme": "Node", "value": "/nodes/vop/collect", "type": "link", "text": ["Collect VOP"], "fullpath": "/nodes/vop/collect.html"}, " can gather several shaders for different renderers to create a USD material that contains all of them."], "extent": [3121, 3260]}, {"type": "para", "indent": 0, "text": ["You can connect the shader VOPs can be connected to one another, and the node will translate these as USD shader connections. (For example, if you connect the output of a ", {"scheme": null, "value": "node:vop/usduvtexture", "type": "link", "text": ["USD UV Texture VOP"], "exists": true}, " to the input of a ", {"scheme": "Node", "value": "/nodes/vop/mtlxUsdPreviewSurface", "type": "link", "text": ["MtlX USD Preview Surface VOP"], "fullpath": "/nodes/vop/mtlxUsdPreviewSurface.html"}, ".)"], "extent": [3260, 3557]}, {"type": "tip_group", "body": [{"type": "tip", "indent": 0, "role": "item", "extent": [3557, 3562], "body": [{"type": "para", "indent": 4, "text": ["To import materials from inside this node, set ", {"type": "ui", "text": ["Fill \u25b8 Material Network"]}, " to ", {"type": "code", "text": ["."]}, " (a single period)."], "extent": [3562, 3668]}], "container": true}, {"type": "tip", "indent": 0, "role": "item", "extent": [3668, 3673], "body": [{"type": "para", "indent": 4, "text": ["You can use a ", {"scheme": "Node", "value": "/nodes/vop/visualize", "type": "link", "text": ["Visualize VOP"], "fullpath": "/nodes/vop/visualize.html"}, " (", {"keys": ["X"], "type": "keys", "text": null}, " hotkey) to debug the shader node network.  If the shader translator for a given shader node supports output value visualization via the Visualize VOP node, then the USD material will be authored in such a way that geometry will be shaded using the value of the shader node feeding into the Visualize VOP."], "extent": [3673, 4039]}], "container": true}], "container": true, "role": "item_group"}]}, {"level": 1, "id": "parameters", "container": true, "type": "parameters_section", "indent": 0, "role": "section", "extent": [4039, 4051], "body": [{"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Auto-generate Preview Surface Shaders"], "extent": [4051, 4091], "body": [{"type": "para", "indent": 4, "text": ["When possible, the LOP will generate a ", {"scheme": "Node", "value": "/nodes/vop/usdpreviewsurface", "type": "link", "text": ["USD Preview Surface VOP"], "fullpath": "/nodes/vop/usdpreviewsurface.html"}, " primitive. This shader type is part of the USD standard and should be implemented by all USD renderers, so this shader (which may be an approximation of the original shader) should show up in any renderer, even if the renderer doesn\u2019t understand the original shader type."], "extent": [4091, 4460]}, {"type": "para", "indent": 4, "text": ["Note, if textures are involved, the auto-generated preview network will wire the alpha output of a USD Texture Reader primitive to the opacity input of a USD Preview Surface shader primitive. Some renderers, like Storm, are known to mishandle the opacity, leading to artifacts in the viewport. To workaround such cases, you can turn this toggle off and then you can manually create a USD Preview network inside, feeding it to the Collect VOP along with the original surface shader."], "extent": [4460, 4947]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Allow Shader Parameter Animation"], "extent": [4947, 4981], "body": [{"type": "para", "indent": 4, "text": ["When it is turned off, all USD values are assumed non-animatable and will be authored at a default time code. And, with this option turned on, shader node parameters that are time-dependent will get translated to USD values at non-default time codes, while time-independent parameters will still author a value at a default time code."], "extent": [5005, 5345]}, {"type": "para", "indent": 4, "text": ["Note, checking parameter time dependency can be costly and may add up to a large portion of the shader translation time. Since the vast majority of shader nodes don\u2019t have animated parameters, this toggle is off by default to save the work involved in checking it."], "extent": [5345, 5615]}], "container": true, "attrs": {"id": "allowparmanim"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Reference Material Render Vars into Render Products"], "extent": [5615, 5668], "body": [{"type": "para", "indent": 4, "text": ["When this checkbox is turned on, the LOP will reference the render vars parent scope primitive (if it exists) into the global render products namespace (i.e., ", {"type": "code", "text": ["/Render/Products/Vars"]}, ")."], "extent": [5698, 5888]}, {"type": "para", "indent": 4, "text": ["Some shader translators author render vars primitives inside the material, and referencing them into the global location makes it easy for renderers to include them in the render product, without traversing the whole stage to look for materials and information about their potential render vars.  But if this behavior is not desirable, you can toggle this checkbox off."], "extent": [5888, 6263]}], "container": true, "attrs": {"id": "referencerendervars"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Parent Primitive Type"], "extent": [6263, 6286], "body": [{"type": "para", "indent": 4, "text": ["If the intermediate prims in a material path don\u2019t exist, the node will create them. This controls the type of the intermediate prims this node creates."], "extent": [6311, 6469]}], "container": true, "attrs": {"id": "parentprimtype"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Material Path Prefix"], "extent": [6469, 6491], "body": [{"type": "para", "indent": 4, "text": ["This is automatically prefixed to any material paths that are not absolute (do not start with a slash). This lets you specify relative paths in the multi-parm, and set their common USD parent hierarchy in this one parameter."], "extent": [6512, 6742]}], "container": true, "attrs": {"id": "pathprefix"}, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Tab Menu "], "extent": [6742, 6759]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Tab Menu Mask"], "extent": [6759, 6775], "body": [{"type": "para", "indent": 4, "text": ["Define the node categories you want to show in the tab menu when you dive into the library."], "extent": [6775, 6872]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "text": [" Fill "], "extent": [6872, 6885]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Material Network"], "extent": [6885, 6904], "body": [{"type": "para", "indent": 4, "text": ["Node path to the VOP network containing material nodes to import. The node looks for materials here when you click ", {"type": "ui", "text": ["Auto-fill Materials"]}, ". Set this to ", {"type": "code", "text": ["."]}, " (a single period) to use the VOP subnet inside this node."], "extent": [6904, 7123]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Container Path"], "extent": [7123, 7139], "body": [{"type": "para", "indent": 4, "text": ["The default parent scene graph path of newly created materials. This is prefixed to the material names to get the material prim path when you click ", {"type": "ui", "text": ["Auto-fill Materials"]}, "."], "extent": [7139, 7317]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Auto-fill Materials"], "extent": [7317, 7338], "body": [{"type": "para", "indent": 4, "text": ["Click this to automatically create instances of the multi-parm for each material node in ", {"type": "ui", "text": ["Fill \u25b8 Material Network"]}, "."], "extent": [7338, 7461]}, {"type": "para", "indent": 4, "text": ["This button will look for the material VOPs with material flag turned on inside the network  specified in ", {"type": "ui", "text": ["Fill \u25b8 Light Filter Network"]}, ". Each such node will be filled into own multi-parm instance. The filled entry will also use the ", {"type": "ui", "text": ["Fill \u25b8 Container Path"]}, " for the USD path at which to author the USD material translated from that node."], "extent": [7461, 7806]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}, {"level": 3, "type": "sep", "indent": 0, "extent": [7806, 7810]}, {"type": "parameters_item_group", "body": [{"type": "parameters_item", "indent": 0, "text": ["Number of Materials"], "extent": [7810, 7832], "body": [{"type": "para", "indent": 4, "text": ["The number of materials to import. Set the number or click the plus and minus buttons to add or remove material imports."], "extent": [7832, 7958]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Include Only VOPs with Material Flag Set"], "extent": [7958, 8000], "body": [{"type": "para", "indent": 4, "text": ["If ", {"type": "ui", "text": ["Material VOP"]}, " is a pattern, this excludes nodes that don\u2019t have the Material flag on. Default is off."], "extent": [8000, 8117]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Material VOP"], "extent": [8117, 8131], "body": [{"type": "para", "indent": 4, "text": ["The Houdini node path to a VOP node representing a shader or material. This can be a node pattern, in which case this node will import all matched nodes as USD materials."], "extent": [8131, 8307]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Material Path"], "extent": [8307, 8322], "body": [{"type": "para", "indent": 4, "text": ["The scene graph path at which to create the USD prim. If this is an absolute path (starts with a slash), it is used as-is. If this path is relative, it is relative to the path in the ", {"type": "ui", "text": ["Path Prefix"]}, " parameter."], "extent": [8344, 8559]}], "container": true, "attrs": {"id": "usdpath"}, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Assign to Geometry"], "extent": [8559, 8579], "body": [{"type": "para", "indent": 4, "text": ["When this is on, you can assign the newly imported material to USD geometry prims using the ", {"type": "ui", "text": ["Geometry Path"]}, " parameter below."], "extent": [8579, 8711]}], "container": true, "role": "item"}, {"type": "parameters_item", "indent": 0, "text": ["Geometry Path"], "extent": [8711, 8726], "body": [{"type": "para", "indent": 4, "text": ["When ", {"type": "ui", "text": ["Assign to Geometry"]}, " is on, assigns the newly imported material to the primitives listed in this parameter."], "extent": [8726, 8847]}], "container": true, "role": "item"}], "container": true, "role": "item_group"}], "text": "Parameters"}, {"level": 1, "id": "related", "container": true, "type": "related_section", "indent": 0, "role": "section", "extent": [8847, 8856], "body": [{"type": "bullet_group", "body": [{"blevel": 2, "type": "bullet", "indent": 0, "text": [{"scheme": "Node", "value": "/nodes/lop/lightfilterlibrary", "type": "link", "text": "", "fullpath": "/nodes/lop/lightfilterlibrary.html"}], "extent": [8856, 8889]}], "container": true}], "text": "Related"}], "title": ["Material Library"], "summary": ["Authors USD material primitives from shader VOP nodes."]}