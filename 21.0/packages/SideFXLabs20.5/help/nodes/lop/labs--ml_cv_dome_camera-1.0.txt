#type:     node
#context:  lop
#internal: labs::ml_cv_dome_camera::1.0
#icon:     /labs_icons/sidefxlabs_default.svg
#since:    20.5

= Labs ML CV Dome Camera =

"""Generates a camera from one of the random positions within a specified 3D camera dome and frames the focus object within the camera's view."""


This node takes a camera at world origin (from the second input) and places it around a focus object or proxy (from the first input) ensuring that it is always in frame.


:box:
    #display: raised yellow

    The original ML Computer Vision tools were developed by the Synthetic Data team at Endava PLC.


@parameters

    Use with PDG:
        #id: usewithpdg
        Uses this node with a PDG setup.
        
    Seed:
        #id: seed_pdg
        Randomizes the distribution of cameras. Defaults to the frame seed from the ROP Synthetic Data TOP.
        
    Save Path:
        #id: savepath_pdg
        Disk location where the USD prim will be saved if exported. Defaults to the usd/cams folder.
        
    Show Preview:
        #id: showpreview
        Visualizes the area where a camera can spawn.
        
    == Dome ==

    === Angle ===

    Latitude Min:
        #id: latitude_min
        Defines the allowable range in elevation around the centroid of the focus object.
        
    Latitude Max:
        #id: latitude_max
        Defines the allowable range in elevation around the centroid of the focus object.
        
    Azimuth Min:
        #id: azimuth_min
        Defines the allowable range of azimuth (which refers to the horizontal angle) around the centroid of the focus object.
        
    Azimuth Max:
        #id: azimuth_max
        Defines the allowable range of azimuth (which refers to the horizontal angle) around the centroid of the focus object.
        
    === Distance and Screen Percentage ===

    Screen Percentage Min:
        #id: screenpct_min
        Defines the allowable minimum percentage of screen space an object can occupy along the smaller of the two screen space axes, determined by the camera's aspect ratio.
        
    Screen Percentage Max:
        #id: screenpct_max
        Defines the allowable maximum percentage of screen space an object can occupy along the smaller of the two screen space axes, determined by the camera's aspect ratio.
        
    Enable Distance Range Min:
        #id: enabledistrange_min
        Enables the use of a custom distance range. If this box is not checked the camera dome will default to an automatic range calculation based on the object size and the cameras, aperture and focal length settings. Depending on the cameras aspect ratio the auto distance will calculate by either the horizontal aperture or vertical aperture, whichever aperture is smaller.
        
    Distance Range Min:
        #id: distrange_min
        Defines the allowable minimum range for the camera's distance from the centroid of the focus object.
        
    Enable Distance Range Max:
        #id: enabledistrange_max
        Enables the use of a custom distance range. If this box is not checked the camera dome will default to an automatic range calculation based on the object size and the cameras, aperture and focal length settings. Depending on the cameras aspect ratio the auto distance will calculate by either the horizontal aperture or vertical aperture, whichever aperture is smaller.
        
    Distance Range Max:
        #id: distrange_max
        Defines the allowable maximum range for the camera's distance from the centroid of the focus object.
        
    Maintain Object Screen Percentage:
        #id: objscreenpct
        Distributes cameras to achieve an equal distribution of the focus object's screen space size, rather than equalizing the distances between the focus object and the camera. Useful when there is significant variation in camera distance.
        
    == Camera ==

    === Primitive ===

    Primitive Path:
        #id: primpath
        The USD primitive path where the node will generate the camera dome.
        
    Camera Base Name:
        #id: cambasename
        The base name for the camera object. A number will be appended to this name.
        
    === Transform ===

    Roll Range:
        #id: rollrange
        Defines the allowable range for the camera's roll (rotation along the camera's view vector).
        
    Center Object:
        #id: centerobj
        Disables random camera orientation (default behavior) and centers the camera on the object.
        
    === Advanced ===

    Frame Minimum:
        #id: frameminimum
        Orients the camera so the focus object is toward the bottom left corner. Useful for setting the desired frustum padding.
        
    Padding:
        #id: padding
        Adds padding rotation (in degrees) to the camera to create a buffer between the focus object and the edge of the camera frustum.
        
    == Distribution Visualization ==

    Camera Count:
        #id: camcount
        Specifies the number of points scattered to visualize potential camera placement locations (visualization only).
        
    Point Color:
        #id: pointcolor
        Determines the color used to display the scattered points.
        
    Too Close Warning:
        #id: tooclosewarning
        Defines the color of points that are too close to the focus object, indicating that the object would exceed the camera's frustum.


@examples

    TIP:
        When viewing in Houdini's Help Browser, please copy the example file's URL to a regular browser to proceed with the download.

    - [Example File|https://github.com/sideeffects/SideFXLabsExamples/blob/main/examples/ml_computer_vision/ml_computer_vision.1.0.zip]


@related